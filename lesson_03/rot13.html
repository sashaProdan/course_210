<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Rot13 Cipher</title>
  </head>
  <body>
  <script>
    function rot13(string) {
      var newString = '';
      var cipher;
      
      for (var i = 0; i < string.length; i++) {
        if (isLetter(string[i])) {
          cipher = string.charCodeAt(i);

          if (isLowercase(string[i]) && string[i] >= 'n') {
            cipher = lowerStartLetter(cipher);
          } else if (isUppercase(string[i]) && string[i] >= 'N') {
            cipher = upperStartLetter(cipher);
          } else {
            cipher += 13;
          }
          
          newString += String.fromCharCode(cipher);

        } else {
          newString += string[i];
        }
      }

      return newString;
    }

    function isLetter(str) {
      return isLowercase(str) || isUppercase(str);
    }

    function isLowercase(str) {
      return str >= 'a' && str <= 'z';
    }

    function isUppercase(str) {
      return str >= 'A' && str <= 'Z';
    }

    function lowerStartLetter(charCode) {
      var start, startLetter;

      start = 13 - ('z'.charCodeAt() - charCode);
      startLetter = 'a'.charCodeAt() + (start - 1);
      
      return startLetter;
    }

    function upperStartLetter(charCode) {
      var start, startLetter;

      start = 13 - ('Z'.charCodeAt() - charCode);
      startLetter = 'A'.charCodeAt() + (start - 1);

      return startLetter;
    }

    console.log(rot13('Teachers open the door, but you must enter by yourself.'));

    console.log(rot13(rot13('Teachers open the door, but you must enter by yourself.')));
  </script>
  </body>
</html>